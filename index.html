<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Idle Insect</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- ========== HEADER ========== -->
  <header>
    <div id="left-header">
      <div id="game-title">Idle Swarm</div>
      <div id="resource-line"></div>

      <!-- === RESOURCES === -->
      <div id="resources">
        <span>
          Food: <span id="food">0</span>
          <br><small id="food-rate-text">Food per sec: 0</small>
        </span>

        <span id="soil-container" class="hidden">
          Soil: <span id="soil">0</span>
          <br><small id="soil-rate-text">Soil per sec: 0</small>
        </span>

        <span id="mineral-container" class="hidden">
          Minerals: <span id="minerals">0</span>
          <br><small id="mineral-rate-text">Minerals per sec: 0</small>
        </span>

        <span id="research-container" class="hidden">
          Research: <span id="research">0</span>
          <br><small id="research-rate-text">Research per sec: 0</small>
        </span>
      </div>
    </div>

  </header>

  <!-- ========== NAVIGATION TABS ========== -->
  <nav id="tabs">
    <button class="tab-button active" data-tab="main-tab">Main</button>
      <button class="tab-button" data-tab="skills-tab" id="skills-tab-button">Skills</button>
    <button class="tab-button hidden" data-tab="ascension-tab" id="ascension-tab-button">Ascension</button>
    <button class="tab-button hidden" data-tab="cheats-tab" id="cheats-tab-button">Cheats</button>
  </nav>

  <!-- ========== MAIN GAME AREA ========== -->
  <main>

    <!-- === MAIN TAB === -->
    <section id="main-tab" class="tab active">
     <div id="units">

      <!-- === CHEATS TAB === -->
<section id="cheats-tab" class="tab hidden">
  <h2>Developer Cheats</h2>
  <div class="unit">
    <h3>Resources</h3>
    <p>Add resources instantly:</p>
    <div id="cheat-buttons">
      <div class="cheat-group">
        <strong>Food:</strong>
        <button class="cheat-add" data-resource="food" data-amount="1">+1</button>
        <button class="cheat-add" data-resource="food" data-amount="5">+5</button>
        <button class="cheat-add" data-resource="food" data-amount="10">+10</button>
        <button class="cheat-add" data-resource="food" data-amount="100">+100</button>
        <button class="cheat-add" data-resource="food" data-amount="1000">+1000</button>
        <button class="cheat-add" data-resource="food" data-amount="10000">+10000</button>
      </div>

      <div class="cheat-group">
        <strong>Soil:</strong>
        <button class="cheat-add" data-resource="soil" data-amount="1">+1</button>
        <button class="cheat-add" data-resource="soil" data-amount="5">+5</button>
        <button class="cheat-add" data-resource="soil" data-amount="10">+10</button>
        <button class="cheat-add" data-resource="soil" data-amount="100">+100</button>
        <button class="cheat-add" data-resource="soil" data-amount="1000">+1000</button>
        <button class="cheat-add" data-resource="soil" data-amount="10000">+10000</button>
      </div>

      <div class="cheat-group">
        <strong>Minerals:</strong>
        <button class="cheat-add" data-resource="minerals" data-amount="1">+1</button>
        <button class="cheat-add" data-resource="minerals" data-amount="5">+5</button>
        <button class="cheat-add" data-resource="minerals" data-amount="10">+10</button>
        <button class="cheat-add" data-resource="minerals" data-amount="100">+100</button>
        <button class="cheat-add" data-resource="minerals" data-amount="1000">+1000</button>
        <button class="cheat-add" data-resource="minerals" data-amount="10000">+10000</button>
      </div>

      <div class="cheat-group">
        <strong>Research:</strong>
        <button class="cheat-add" data-resource="research" data-amount="1">+1</button>
        <button class="cheat-add" data-resource="research" data-amount="5">+5</button>
        <button class="cheat-add" data-resource="research" data-amount="10">+10</button>
        <button class="cheat-add" data-resource="research" data-amount="100">+100</button>
        <button class="cheat-add" data-resource="research" data-amount="1000">+1000</button>
        <button class="cheat-add" data-resource="research" data-amount="10000">+10000</button>
      </div>
    </div>
  </div>

  <div class="unit">
    <h3>Unit Purchase</h3>
    <p>Toggle free unit purchases:</p>
    <button id="toggle-free-units">Enable Free Unit Buying</button>
  </div>
</section>


  <!-- ========== INSECT DROPDOWN ========== -->
  <div class="dropdown">
    <div class="dropdown-header" data-target="insect-group">
      <span>üêú Insect</span>
      <span class="arrow">‚ñº</span>
    </div>
    <div id="insect-group" class="dropdown-content open">

      <!-- LARVA -->
      <div class="unit" id="larva-unit">
        <h3>Larva</h3>
        <p>Produces 0.5 Food/sec</p>
        <p>Owned: <span id="larva-count">0</span></p>
        <div class="progress-container"><div class="progress-bar" id="larva-progress"></div></div>
        <div class="status-text" id="larva-status">‚ùå Not enough Food</div>
        <button id="buy-larva">Buy Larva (Cost: <span id="larva-cost">10</span> Food)</button>
      </div>

      <!-- ANT -->
      <div class="unit hidden" id="ant-unit">
        <h3>Ant</h3>
        <p>Produces 1 Food/sec</p>
        <p>Owned: <span id="ant-count">0</span></p>
        <div class="progress-container"><div class="progress-bar" id="ant-progress"></div></div>
        <div class="status-text" id="ant-status">‚ùå Not enough Food/Larva</div>
        <button id="buy-ant">Buy Ant (Cost: <span id="ant-cost">150</span> Food)</button>
      </div>

      <!-- QUEEN -->
      <div class="unit hidden" id="queen-unit">
        <h3>Queen</h3>
        <p>Produces 2 Larva/sec and 0.1 Ants/sec</p>
        <p>Owned: <span id="queen-count">0</span></p>
        <div class="progress-container"><div class="progress-bar" id="queen-progress"></div></div>
        <div class="status-text" id="queen-status">‚ùå Not enough Food/50 Ants</div>
        <button id="buy-queen">Buy Queen (Cost: <span id="queen-cost">1000</span> Food)</button>
      </div>

    </div>
  </div>

  <!-- ========== JOBS DROPDOWN ========== -->
  <div class="dropdown">
    <div class="dropdown-header" data-target="jobs-group">
      <span>ü™ì Jobs</span>
      <span class="arrow">‚ñº</span>
    </div>
    <div id="jobs-group" class="dropdown-content open">

      <!-- FORAGER -->
      <div class="unit hidden" id="forager-unit">
        <h3>Forager</h3>
        <p>Produces 5 Food/sec</p>
        <p>Owned: <span id="forager-count">0</span></p>
        <div class="progress-container"><div class="progress-bar" id="forager-progress"></div></div>
        <div class="status-text" id="forager-status">‚ùå Not enough Food/Ant</div>
        <button id="buy-forager">Buy Forager (Cost: <span id="forager-cost">500</span> Food)</button>
      </div>

      <!-- WORKER -->
      <div class="unit hidden" id="worker-unit">
        <h3>Worker</h3>
        <p>Produces 1 Soil/sec</p>
        <p>Owned: <span id="worker-count">0</span></p>
        <div class="progress-container"><div class="progress-bar" id="worker-progress"></div></div>
        <div class="status-text" id="worker-status">‚ùå Not enough Food/Ant</div>
        <button id="buy-worker">Buy Worker (Cost: <span id="worker-cost">200</span> Food)</button>
      </div>

      <!-- DIGGER -->
      <div class="unit hidden" id="digger-unit">
        <h3>Digger</h3>
        <p>Produces 1 Mineral/sec</p>
        <p>Owned: <span id="digger-count">0</span></p>
        <div class="progress-container"><div class="progress-bar" id="digger-progress"></div></div>
        <div class="status-text" id="digger-status">‚ùå Not enough Food/Ant</div>
        <button id="buy-digger">Buy Digger (Cost: <span id="digger-cost">800</span> Food)</button>
      </div>

    </div>
  </div>

  <!-- ========== SCIENCE DROPDOWN ========== -->
  <div class="dropdown">
    <div class="dropdown-header" data-target="science-group">
      <span>üß™ Science</span>
      <span class="arrow">‚ñº</span>
    </div>
    <div id="science-group" class="dropdown-content open">

<!-- SCIENTIST -->
<div class="unit hidden" id="scientist-unit">
  <h3>Scientist</h3>
  <p>Produces 1 Research/sec</p>
  <p>Owned: <span id="scientist-count">0</span></p>
  <div class="progress-container">
    <div class="progress-bar" id="scientist-progress"></div>
  </div>
  <div class="status-text" id="scientist-status">
    ‚ùå Not enough Food/Minerals/Ant
  </div>
  <button id="buy-scientist">
    Buy Scientist
    (Cost: <span id="scientist-food-cost">400</span> Food &
    <span id="scientist-mineral-cost">400</span> Minerals)
  </button>
</div>

        </section>

    <!-- === SKILLS TAB === -->
    <section id="skills-tab" class="tab">
      <h2>Skills</h2>

      <div class="unit" id="summary-upgrade">
        <h3>Production Summary</h3>
        <p>Unlocks production summary bar (Cost: 2000 Research)</p>
        <button id="buy-summary-upgrade">Unlock</button>
      </div>

      <div class="unit" id="efficiency-upgrade">
        <h3>Efficiency Boost</h3>
        <p>Increase all production by 10% (Cost: 5000 Research)</p>
        <button id="buy-efficiency">Unlock</button>
      </div>

      <div class="unit" id="queen-upgrade">
        <h3>Queen Evolution</h3>
        <p>Queen production doubled (Cost: 50,000 Research)</p>
        <button id="buy-queen-upgrade">Unlock</button>
      </div>

      <div class="unit" id="rebirth-upgrade">
        <h3>Rebirth</h3>
        <p>Spend 10,000,000,000 Research to ascend and earn Rebirth Points!</p>
        <button id="buy-rebirth">Rebirth</button>
      </div>
    </section>

    <!-- === ASCENSION TAB === -->
    <section id="ascension-tab" class="tab hidden">
      <h2>Ascension</h2>
      <p>Rebirth Points: <span id="rebirth-points">0</span></p>

      <div class="unit">
        <h3>Boost Larva Production</h3>
        <p>+10% permanent boost per purchase (Cost: 1 Rebirth Point)</p>
        <button id="boost-larva">Buy</button>
      </div>

      <div class="unit">
        <h3>Boost Ant Production</h>
        <p>+10% permanent boost per purchase (Cost: 1 Rebirth Point)</p>
        <button id="boost-ant">Buy</button>
      </div>
    </section>

  </main>

  <!-- === PRODUCTION SUMMARY BAR === -->
  <div id="production-summary" class="hidden">
    <h4>Production Summary</h4>
    <p>
      Food/sec: <span id="food-rate">0</span> |
      Soil/sec: <span id="soil-rate">0</span> |
      Minerals/sec: <span id="mineral-rate">0</span> |
      Research/sec: <span id="research-rate">0</span>
    </p>
  </div>

  <!-- === TOOLTIP (example for Larva) === -->
  <div id="larva-info-box" class="info-box hidden">
    <div class="info-header">
      <span id="close-larva-info" class="close-btn">&times;</span>
      <strong>Larva</strong>
    </div>
    <p>
      Legless, worm-like creature that resembles a small white grub.
      Their primary function is to grow rapidly, eventually spinning a cocoon
      and transforming into a pupa before emerging as an adult ant.
    </p>
  </div>

<!-- === SETTINGS BUTTON === -->
<button id="settings-button" title="Settings">‚öôÔ∏è</button>

<!-- === SETTINGS MODAL === -->
<div id="settings-modal" class="modal hidden">
  <div class="modal-content" id="settings-panel">
    <span id="close-settings" class="close">&times;</span>
    <h2>Settings</h2>

    <div id="settings-layout">
      <!-- LEFT SIDE TABS -->
      <div id="settings-tabs">
        <button class="settings-tab-button active" data-tab="save-tab">üíæ Save</button>
        <button class="settings-tab-button" data-tab="ui-tab">üé® UI</button>
      </div>

      <!-- RIGHT SIDE CONTENT -->
      <div id="settings-tab-content">
        <!-- SAVE TAB -->
        <section id="save-tab" class="settings-tab active">
          <h3>Save Management</h3>
          <button id="manual-save">Save</button>
          <button id="manual-load">Load</button>
          <button id="manual-clear">Clear</button>
          <br><br>
          <button id="export-save">Export Save</button>
          <button id="import-save">Import Save</button>
          <br><br>
          <small>Game Version: <strong>0.1.1</strong></small>
        </section>

        <!-- UI TAB -->
        <section id="ui-tab" class="settings-tab hidden">
          <h3>User Interface</h3>
          <button id="dark-mode-toggle">Toggle Dark Mode</button>
          <p style="font-size: 12px; opacity: 0.8; margin-top: 6px;">
            Switch between light and dark themes.
          </p>
          <hr style="margin: 10px 0; opacity: 0.5;">

        <button id="dropdown-toggle-mode">Toggle Dropdown Behavior</button>
<p style="font-size: 12px; opacity: 0.8; margin-top: 6px;">
  Choose whether dropdowns auto-open when loading your save.<br>
  <strong>Current:</strong> <span id="dropdown-mode-label">Auto-Open</span>
</p>

        </section>
      </div>
    </div>
  </div>
</div>

<script src="script.js"></script>
<script>
  // üß© Idle Swarm Dev Mode Loader (Toggle System)
  // Load or unload dev.js with Ctrl + Shift + D or via ?dev=1

  let devToolsLoaded = false;
  let devScriptElement = null;

  function loadDevTools() {
    if (devToolsLoaded) return;
    devScriptElement = document.createElement("script");
    devScriptElement.src = "dev.js";
    devScriptElement.onload = () => {
      console.log("%cüêú Dev Mode Active ‚Äî Cheats Loaded", "color: orange; font-weight: bold;");
      devToolsLoaded = true;
    };
    document.body.appendChild(devScriptElement);
  }

  function unloadDevTools() {
    if (!devToolsLoaded) return;

    // Deactivate cheats visually/logically if active
    if (window.disableCheats) {
      try {
        window.disableCheats();
        console.log("%c‚ùå Cheat mode disabled.", "color: red; font-weight: bold;");
      } catch (e) {
        console.warn("Could not disable cheats cleanly:", e);
      }
    }

    // üîß FIX: Instead of removing badge and script, just hide badge + flag unload
    const badge = document.getElementById("cheat-badge");
    if (badge) {
      badge.style.opacity = "0";
      setTimeout(() => (badge.style.display = "none"), 400);
    }

    // Soft unload ‚Äî don‚Äôt remove script, just mark inactive
    devToolsLoaded = false;
    window.swarm_dev_initialized = false;

    console.log("%cüîí Dev Mode Unloaded (soft disable, safe reload).", "color: gray; font-weight: bold;");
  }

  // --- Option 1: Load automatically if ?dev=1 or ?dev=true ---
  const params = new URLSearchParams(window.location.search);
  if (params.get("dev") === "1" || params.get("dev") === "true") {
    loadDevTools();
  }

  // --- Option 2: Keyboard Toggle (Ctrl + Shift + D) ---
  document.addEventListener("keydown", e => {
    if (e.ctrlKey && e.shiftKey && e.code === "KeyD") {
      e.preventDefault();
      if (!devToolsLoaded) {
        loadDevTools();
      } else {
        unloadDevTools();
      }
    }
  });
</script>

</body>
</html>
